<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Strawberry Multiverse üçì</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Silkscreen:wght@400;700&family=Quicksand:wght@500;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #ffdae0; --accent-red: #ff8fa3; --deep-berry: #ff4d6d;
            --bg-gradient: linear-gradient(180deg, #fff0f3 0%, #ffdae0 100%);
            --surface-white: rgba(255, 255, 255, 0.85); --scroll-paper: #fff9fa;
            --text-dark: #5e3a3e; --text-pixel: #8a5a61; --border-soft: 6px solid #ffffff; --gold: #ffea8a;
        }
        * { touch-action: none; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #ffe5ec; font-family: 'Quicksand', sans-serif; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        #game-container { width: 100vw; height: 100vh; max-width: 450px; background: var(--bg-gradient); position: relative; border: var(--border-soft); overflow: hidden; border-radius: 25px; box-shadow: 0 15px 50px rgba(255, 182, 193, 0.4); }
        .screen { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; z-index: 10; color: var(--text-dark); }
        .hidden { display: none !important; }
        .btn { background: var(--deep-berry); color: white; border: none; padding: 12px 20px; border-radius: 15px; font-family: 'Silkscreen'; font-size: 11px; box-shadow: 0 6px 0 #e63958; cursor: pointer; margin: 5px; width: 85%; }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #e63958; }
        .tight-btn { width: auto !important; padding: 10px 25px !important; display: inline-block; }
        #load-bar-container { width: 80%; height: 22px; background: var(--surface-white); border-radius: 12px; border: 3px solid #ffb3c1; overflow: hidden; margin: 20px 0; position: relative; }
        #load-bar-fill { width: 0%; height: 100%; background: var(--accent-red); position: absolute; left: 0; top: 0; transition: width 0.1s linear; }
        #victory-overlay { position: absolute; inset: 0; z-index: 2000; background: rgba(255, 245, 247, 0.9); display: none; flex-direction: column; align-items: center; justify-content: center; }
        .victory-text { font-family: 'Fredoka One'; color: var(--deep-berry); font-size: 32px; animation: bounce 0.5s infinite alternate; }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.1); } }
        #memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 90%; max-width: 320px; }
        .card { aspect-ratio: 1/1; background: #ffc2d1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; color: transparent; border: 3px solid white; box-shadow: 0 4px 0 #fb6f92; transition: 0.3s; }
        .card.flipped { background: white; color: initial; transform: rotateY(180deg); }
        .card.matched { background: #f0fff4; border-color: #b7e4c7; box-shadow: none; }
        #final-scroll { display: none; position: absolute; inset: 0; z-index: 1000; background: var(--scroll-paper); padding: 40px 25px; overflow-y: auto; border: 10px solid #ffdae0; transform: scale(0); transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #final-scroll.open { display: block; transform: scale(1); }
        #letter { text-align: left; font-size: 10px; line-height: 1.8; color: var(--text-dark); font-family: 'Press Start 2P', cursive; white-space: pre-wrap; }
        canvas { background: transparent; width: 100%; height: 100%; display: none; object-fit: contain; }
        #death-screen { position: absolute; inset: 0; background: rgba(94, 58, 62, 0.95); z-index: 5000; display: none; flex-direction: column; align-items: center; justify-content: center; color: white; }
    </style>
</head>
<body>
<div id="game-container">
    <div id="stats-bar" style="position: absolute; top: 20px; width: 100%; display: none; justify-content: space-around; z-index: 100; font-family: 'Silkscreen'; color: var(--deep-berry);"><div id="lives-ui">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div></div>
    
    <div id="music-player-container" style="position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none;"><div id="player"></div></div>
    <div id="victory-overlay"><div class="victory-text">LEVEL CLEAR! ‚ú®</div></div>

    <div id="scr-load" class="screen">
        <div style="font-size:65px; animation: pulse 1s infinite;">üçì</div>
        <div id="percent-text" style="font-family:'Silkscreen'; color: var(--text-pixel); font-weight: bold;">0%</div>
        <div id="load-bar-container"><div id="load-bar-fill"></div></div>
        <div id="trivia-box" style="height:60px; font-size:13px; font-weight:bold; color: var(--text-pixel); font-family: 'Fredoka One'; padding: 0 10px;">Initializing Multiverse...</div>
    </div>

    <div id="scr-title" class="screen hidden">
        <h1 style="font-family:'Fredoka One'; color: var(--deep-berry); font-size: 28px;">STRAWBERRY MULTIVERSE</h1>
        <button id="start-btn" class="btn tight-btn" onclick="startGame()">START ADVENTURE ‚ú®</button>
    </div>

    <div id="scr-gate1" class="screen hidden"><h2>DO YOU LOVE ME?</h2><div style="display:flex; gap:10px;"><button class="btn tight-btn" onclick="showScreen('scr-gate2')">YES</button><button class="btn tight-btn" onclick="showScreen('scr-gate2')">YES</button></div></div>
    <div id="scr-gate2" class="screen hidden"><h2>DO YOU REALLY LOVE ME?</h2><div id="gate-area-logic" style="width:100%; height:300px; position:relative; display:flex; gap:10px; align-items:center; justify-content:center;"><button id="yes-btn-3" class="btn tight-btn" onclick="handleYesSequence()">YES!</button><button id="no-run" class="btn tight-btn" onmouseover="teleportNo()" ontouchstart="teleportNo()" onclick="handleNoClick()">NO</button></div></div>

    <div id="scr-quiz" class="screen hidden"><h2 id="quiz-count" style="font-size:11px; color:var(--deep-berry);">SYNCING...</h2><p id="quiz-q" style="min-height:50px; font-weight:bold; font-size:16px; font-family: 'Fredoka One';"></p><div id="quiz-options" style="display:flex; flex-direction:column; align-items:center; width:100%; gap:8px;"></div></div>
    
    <div id="scr-memory" class="screen hidden"><h2 style="font-family:'Fredoka One'; color: var(--deep-berry);">‚ú® HEART SNAP ‚ú®</h2><div id="matches-text" style="font-family:'Silkscreen'; margin-bottom: 10px;">Matches: 0 / 6</div><div id="memory-grid"></div></div>

    <div id="scr-boss" class="screen hidden" style="padding:0;">
        <div class="hud-mini" style="position: absolute; top: 15px; width: 90%; left: 5%; display: flex; align-items: center; justify-content: space-between; background: var(--surface-white); padding: 8px 12px; border-radius: 15px; border: 2px solid #ffb3c1; z-index: 100;">
            <span class="flag">üá∏üá™</span>
            <div class="distance-bar-container" style="flex-grow: 1; margin: 0 10px; height: 14px; background: #eee; border-radius: 7px; position: relative; overflow: hidden; border: 1px solid #ddd;"><div class="km-label" id="km-text" style="font-size: 10px; color: var(--text-dark); font-weight: 900; position: absolute; width: 100%; text-align: center; top: 0;">10,500 KM</div><div class="distance-fill" style="height: 100%; width: 0%; background: var(--accent-red); border-radius: 5px; transition: width 0.1s;"></div></div>
            <span class="flag">üáµüá≠</span>
        </div>
        <div id="boss-tag" style="position: absolute; top: 75px; width: 100%; display: none; flex-direction: column; align-items: center; z-index: 100;"><div class="boss-name" id="boss-label" style="font-size: 11px; font-weight: 900; color: var(--deep-berry); margin-bottom: 3px; letter-spacing: 1px;">VILLAIN</div><div class="hp-container" style="width: 60%; height: 10px; background: #ddd; border-radius: 5px; border: 1.5px solid var(--deep-berry); overflow: hidden;"><div class="hp-fill" id="hp-fill" style="height: 100%; width: 100%; background: var(--deep-berry); transition: width 0.2s;"></div></div></div>
        <div id="bubble" class="dialog-bubble" style="position: absolute; background: white; border: 3px solid var(--deep-berry); padding: 10px; border-radius: 18px; font-size: 14px; color: #444; font-weight: bold; text-align: center; z-index: 90; display: none; width: 180px;"></div>
    </div>

    <div id="final-scroll">
        <div class="scroll-title" style="color: var(--deep-berry); font-family: 'Fredoka One'; text-align: center; margin-bottom: 20px; font-size: 24px;">üìú Victory for Lexi & CJ</div>
        <div id="letter"></div>
        <center><div style="font-size: 30px; margin: 20px 0;">üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©</div><button onclick="location.reload()" class="btn tight-btn" style="background: var(--deep-berry); border-radius:30px; font-family:'Fredoka One'; font-size: 16px;">Replay Journey</button></center>
    </div>

    <canvas id="gameCanvas"></canvas>
    <div id="death-screen"><h1 style="font-family:'Silkscreen';">YOU DIED</h1><div id="fill-ui"></div><p>BLOW INTO MIC!</p><button class="btn tight-btn" onclick="initMic()">REVIVE</button></div>
    <div id="ready-overlay" class="screen hidden" style="background:rgba(255,245,247,0.98); z-index:1000;"><h2 id="ready-title" style="font-family:'Fredoka One'; color: var(--deep-berry);"></h2><p id="ready-instr" style="font-weight: bold;"></p><h1 id="countdown" style="font-family:'Silkscreen';">3</h1></div>
</div>

<script>
    let ytPlayer, musicReady = false;
    const tag = document.createElement('script'); tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);
    function onYouTubeIframeAPIReady() { ytPlayer = new YT.Player('player', { height: '1', width: '1', videoId: 'Uj93hicGDNc', playerVars: { 'autoplay': 1, 'controls': 0, 'modestbranding': 1, 'loop': 1, 'playlist': 'Uj93hicGDNc', 'origin': window.location.origin }, events: { 'onReady': (e) => { e.target.mute(); e.target.playVideo(); }, 'onStateChange': (e) => { if (e.data == 1) musicReady = true; } } }); }

    const triviaList = ["LDR Love Language: Videocalls until we fall asleep. üí§", "Who yaps more? Definitely one of us. üé§", "Time zones can't keep us apart! ‚è∞", "CJ + Lexi = The Ultimate Duo. üçì", "Syncing braincells in 3... 2... 1...", "Did you know CJ loves you more than iced coffee?", "Distance is just a number."];
    const quizData = [{q: "What‚Äôs our official LDR love language?", a: ["Virtual movie marathons.", "Yapping sessions", "Sending TikToks I‚Äôve already seen.", "Falling asleep on the phone together.", "Lablab", "All of the above (We‚Äôre obsessed)."]}, {q: "The most flirty thing you can say to me right now is...", a: ["'I booked a flight.'", "'Check your door, I sent food.'", "I'm wearing that shirt you like.'", "Aliiiiiiiii~ <3", "None (It's actually 'I bought you a Squishmallow')."]}, {q: "Who is the designated 'Yap-Master' during calls?", a: ["You (and it's adorable).", "Me (sorry for the 20-minute rant).", "We both fight for the mic.", "The dog that won't stop barking."]}, {q: "What‚Äôs my favorite 'view' whilst we‚Äôre apart?", a: ["Your morning selfies.", "Your message or call notifications.", "The countdown app on my home screen.", "All (but mostly your face)."]}, {q: "Our first physical meeting would be like...", a: ["A slow-mo movie scene.", "Pure chaos and crying.", "'Finally, I can stop smelling my screen.'", "A Pinterest board coming to life."]}, {q: "What is the ultimate 'LDR struggle' we‚Äôve mastered?", a: ["Bad Wi-Fi during the best part.", "Time zone math (mathematician vibes).", "The 'I miss you' loop every 5 mins.", "The grumpy mode kapag gutom", "All of the above."]}, {q: "Which red flag I‚Äôd actually ignore for you?", a: ["You leave me on read for 2 mins.", "Your music taste is interesting.", "You‚Äôre a miles-away-princess.", "None (You're a green flag with glitter)."]}, {q: "If we were in a 'U-Haul' movie, who‚Äôs driving?", a: ["You (The Captain).", "Me (The Navigator).", "We‚Äôre both in the back with snacks.", "We aren't driving, we're already moved in."]}, {q: "The most 'us' thing we do is...", a: ["Virtual date nights with same movie.", "TikTok shares 50x a day.", "Competitive flirting.", "All of the above."]}, {q: "How much do I actually love you?", a: ["To the moon and back.", "More than iced coffee/strawberry.", "Enough to fight Distance Boss forever.", "All that is mentioned and more."]}];

    let state = { lives: 9, stage: 'load', active: false, score: 0, pX: 225, pY: 700, bullets: [], obstacles: [], enemies: [], boss: { active: false, hp: 100, max: 100 }, travel: 0, currentBossStage: 0, frameCount: 0, targetX: 225, targetY: 700, qIdx: 0 };
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let gateYesClicks = 0, noClickAttempts = 0;

    document.addEventListener("DOMContentLoaded", () => {
        canvas.width = 450; canvas.height = 800;
        let progress = 0, loadTimer = 0;
        const loadInt = setInterval(() => {
            loadTimer += 50; if(progress < 99) progress++;
            if(loadTimer > 5000) progress = 100;
            if(progress >= 95 && musicReady) progress = 100;
            document.getElementById('load-bar-fill').style.width = progress + "%";
            document.getElementById('percent-text').innerText = progress + "%";
            if(progress % 20 === 0) document.getElementById('trivia-box').innerText = triviaList[Math.floor(Math.random()*triviaList.length)];
            if(progress >= 100) { clearInterval(loadInt); showScreen('scr-title'); }
        }, 50);
    });

    function startGame() { if(ytPlayer && ytPlayer.unMute) { ytPlayer.unMute(); ytPlayer.playVideo(); } showScreen('scr-gate1'); }
    function handleYesSequence() { if(++gateYesClicks >= 3) startQuiz(); teleportNo(); }
    function teleportNo() { const noBtn = document.getElementById('no-run'); noBtn.style.position = 'absolute'; noBtn.style.left = Math.random()*250+'px'; noBtn.style.top = Math.random()*250+'px'; }
    function handleNoClick() { if(++noClickAttempts >= 20) alert("Halaa di mo na ako lab? :<<"); teleportNo(); }
    function startQuiz() { showScreen('scr-quiz'); renderQuiz(); }
    function renderQuiz() {
        if(state.qIdx >= 10) { triggerVictory('harvest'); return; }
        const d = quizData[state.qIdx];
        document.getElementById('quiz-count').innerText = `SYNC: ${state.qIdx+1}/10`;
        document.getElementById('quiz-q').innerText = d.q;
        const cont = document.getElementById('quiz-options'); cont.innerHTML = '';
        d.a.forEach(opt => { const b = document.createElement('button'); b.className = 'btn tight-btn'; b.innerText = opt; b.onclick = () => { state.qIdx++; renderQuiz(); }; cont.appendChild(b); });
    }

    function triggerVictory(nextStage) {
        state.active = false;
        const ov = document.getElementById('victory-overlay');
        ov.style.display = 'flex';
        setTimeout(() => { ov.style.display = 'none'; startStage(nextStage); }, 2000);
    }

    function startStage(s) {
        state.stage = s; state.active = false; state.score = 0; state.enemies = []; state.obstacles = []; state.bullets = []; state.pX = 225; state.pY = 700;
        showScreen('ready-overlay');
        const cfg = { harvest: ["THE HARVEST", "Catch 10 Hearts!"], memory: ["HEART SNAP", "Match all Pairs!"], boss: ["FINAL BOSS", "Defeat Distance!"] };
        document.getElementById('ready-title').innerText = cfg[s][0];
        document.getElementById('ready-instr').innerText = cfg[s][1];
        let c = 3; const itv = setInterval(() => { if(--c <= 0) { clearInterval(itv); document.getElementById('ready-overlay').classList.add('hidden'); initLogic(s); } else document.getElementById('countdown').innerText = c; }, 1000);
    }

    function initLogic(s) { 
        document.getElementById('stats-bar').style.display = 'flex'; 
        if(s === 'memory') { canvas.style.display = 'none'; showScreen('scr-memory'); setupMemory(); } 
        else if(s === 'boss') { canvas.style.display = 'block'; showScreen('scr-boss'); state.active = true; loopBoss(); } 
        else { canvas.style.display = 'block'; state.active = true; requestAnimationFrame(engine); } 
    }

    function engine() {
        if(!state.active || state.stage !== 'harvest') return;
        ctx.clearRect(0,0,450,800);
        if(Math.random() < 0.05) state.enemies.push({x: Math.random()*400 + 25, y: -50, t: Math.random() > 0.3 ? 'üíñ' : 'üëæ'});
        state.enemies.forEach((it, i) => {
            it.y += 6; ctx.font = "40px Arial"; ctx.fillText(it.t, it.x - 20, it.y);
            if(it.y > 670 && it.y < 730 && Math.abs(it.x - state.pX) < 50) {
                if(it.t === 'üíñ') state.score++; else hit();
                state.enemies.splice(i,1);
            }
        });
        ctx.fillStyle = "#5d3a3e"; ctx.font = "bold 20px Fredoka One"; ctx.fillText(`Hearts: ${state.score}/10`, 20, 50);
        ctx.font="50px Arial"; ctx.fillText("üß∫", state.pX-25, 700);
        if(state.score >= 10) triggerVictory('memory');
        requestAnimationFrame(engine);
    }

    function loopBoss() {
        if(!state.active || state.stage !== 'boss') return;
        ctx.clearRect(0,0,450,800);
        state.frameCount++; state.pX += (state.targetX - state.pX) * 0.15; state.pY += (state.targetY - state.pY) * 0.15;
        if(!state.boss.active) {
            state.travel += 0.085; document.querySelector('.distance-fill').style.width = state.travel + '%'; 
            document.getElementById('km-text').innerText = Math.floor(10500 * (1 - state.travel/100)).toLocaleString() + " KM";
            if(state.travel >= 30 && state.currentBossStage === 0) startBossInstance("STORM", "Lexi, you can't pass!", "‚õàÔ∏è", 250);
            if(state.travel >= 65 && state.currentBossStage === 1) startBossInstance("GHOST", "7 hour gap!", "üëª", 350);
            if(state.travel >= 98 && state.currentBossStage === 2) startBossInstance("WORLD", "GIVE UP!", "üåç", 650);
        }
        if(state.frameCount % 8 === 0) state.bullets.push({x: state.pX, y: state.pY, s: 16});
        state.bullets.forEach((b, i) => {
            b.y -= b.s; ctx.font='20px Arial'; ctx.fillText('‚ù§Ô∏è', b.x-10, b.y);
            if(state.boss.active && b.y < 200 && Math.abs(b.x - 225) < 80) { state.boss.hp -= 5; state.bullets.splice(i, 1); document.getElementById('hp-fill').style.width = (state.boss.hp/state.boss.max*100) + '%'; if(state.boss.hp <= 0) winBossInstance(); }
        });
        if(state.boss.active && state.frameCount % 20 === 0) state.obstacles.push({x: Math.random()*450, y: 150, t: '‚ö°'});
        state.obstacles.forEach((o, i) => { o.y += 7; ctx.font='24px Arial'; ctx.fillText(o.t, o.x-12, o.y); if(Math.hypot(state.pX-o.x, state.pY-o.y) < 35) { state.travel=Math.max(0, state.travel - 2); state.obstacles.splice(i,1); } });
        ctx.font='45px Arial'; ctx.fillText('üçì', state.pX-22, state.pY);
        if(state.boss.active) { ctx.font='100px Arial'; ctx.textAlign='center'; ctx.fillText(state.boss.icon, 225, 180); ctx.textAlign='left'; }
        requestAnimationFrame(loopBoss);
    }

    function startBossInstance(name, txt, icon, hp) { state.boss = { active: true, name, icon, hp, max: hp }; document.getElementById('boss-label').innerText = name; document.getElementById('boss-tag').style.display='flex'; document.getElementById('bubble').style.display='block'; document.getElementById('bubble').innerText=txt; document.getElementById('bubble').style.left='135px'; document.getElementById('bubble').style.top='200px'; }
    function winBossInstance() { document.getElementById('boss-tag').style.display='none'; document.getElementById('bubble').style.display='none'; if(state.currentBossStage === 2) { state.active=false; showFinalScroll(); } else state.currentBossStage++; state.boss.active=false; }
    
    function setupMemory() {
        const grid = document.getElementById('memory-grid'); const emojis = ['ü¶Ñ', 'üåà', 'üë©‚Äç‚ù§Ô∏è‚Äçüë©', 'üå∏', '‚ú®', 'üçì'];
        let cards = [...emojis, ...emojis].sort(() => Math.random() - 0.5); grid.innerHTML = '';
        cards.forEach(emoji => {
            const card = document.createElement('div'); card.className = 'card'; card.innerText = emoji;
            card.onclick = () => {
                if(card.classList.contains('flipped') || (state.flippedCards && state.flippedCards.length >= 2)) return;
                card.classList.add('flipped'); state.flippedCards = state.flippedCards || []; state.flippedCards.push(card);
                if(state.flippedCards.length === 2) {
                    if(state.flippedCards[0].innerText === state.flippedCards[1].innerText) { state.flippedCards.forEach(c => c.classList.add('matched')); state.flippedCards = []; if(document.querySelectorAll('.matched').length === 12) triggerVictory('boss'); }
                    else { setTimeout(() => { state.flippedCards.forEach(c => c.classList.remove('flipped')); state.flippedCards = []; }, 800); }
                }
            }; grid.appendChild(card);
        });
    }

    function showFinalScroll() {
        const scroll = document.getElementById('final-scroll'); scroll.style.display='block'; setTimeout(() => scroll.classList.add('open'), 10);
        let i = 0; const letterDiv = document.getElementById('letter'); letterDiv.innerHTML = "";
        const letterContent = `Lexi, They say in most games you only get one life, but honestly? Being with you feels like a permanent power-up. Whether we‚Äôre locked in on a mission or just yapping until the stars fade into the morning, you‚Äôre the only one I want on my team. No debate.\n\nDistance is just a glitch in the system‚Äîa temporary lag spike in a connection that‚Äôs already written in the stars. My heart is permanently synced to yours. The numbers on a screen could never measure the way you make me feel; you are the only thing that feels real in this digital multiverse.\n\nYou‚Äôve guarded my heart better than any high score, and I promise to keep yours on lock forever. You aren't just my Player Two; you‚Äôre my sanctuary, my endgame, and my entire world.\n\nI‚Äôm so cooked for you, Lexi. I'm choosing you today, tomorrow, and every day after that.\n\nYours forever, CJ Morales`;
        function type() { if(i < letterContent.length) { letterDiv.innerHTML += letterContent[i]==='\n'?'\n':letterContent[i]; i++; setTimeout(type, 30); scroll.scrollTop=scroll.scrollHeight; } } type();
    }

    const handleInput = (e) => {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const touchX = (clientX - rect.left) * (canvas.width / rect.width);
        state.targetX = touchX; state.pX = touchX;
    };
    window.addEventListener('mousedown', handleInput); window.addEventListener('touchstart', handleInput);
    window.addEventListener('mousemove', handleInput);
    function hit() { state.lives--; document.getElementById('lives-ui').innerText = "‚ù§Ô∏è".repeat(state.lives); if(state.lives<=0) { state.active=false; document.getElementById('death-screen').style.display='flex'; } }
    function showScreen(id) { document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }
    async function initMic() { state.lives = 9; document.getElementById('lives-ui').innerText = "‚ù§Ô∏è".repeat(9); document.getElementById('death-screen').style.display='none'; state.active=true; if(state.stage==='boss') loopBoss(); else requestAnimationFrame(engine); }
</script>
</body>
</html>
