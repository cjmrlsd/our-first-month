<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Lexi üçì</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Silkscreen&family=Quicksand:wght@500;700&display=swap');
        
        :root { --pink: #ffc1cc; --hot-pink: #ff4d6d; --berry: #5d2e0c; }

        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: #1a0508; 
            font-family: 'Quicksand', sans-serif; 
            height: 100vh; 
            width: 100vw; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden; 
        }

        #game-container { 
            width: 100%; 
            height: 100%; 
            max-width: 450px; 
            background: #fff5f5; 
            position: relative; 
            border: 4px solid white;
        }

        .screen { 
            position: absolute; 
            inset: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            padding: 20px; 
            z-index: 10; 
            background: #fff5f5;
        }

        .hidden { display: none !important; }

        /* Stage 1: Loading */
        #load-bar-container { width: 80%; height: 20px; background: #eee; border-radius: 10px; border: 2px solid var(--berry); overflow: hidden; margin: 20px 0; }
        #load-bar-fill { width: 0%; height: 100%; background: var(--hot-pink); }
        
        .btn { 
            background: var(--hot-pink); 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 50px; 
            font-family: 'Silkscreen'; 
            box-shadow: 0 6px 0 #e63958; 
            cursor: pointer;
            font-size: 14px;
        }

        #no-run { 
            position: absolute; 
            transition: 0.1s translate; 
            z-index: 100;
        }

        canvas { width: 100%; height: 100%; display: none; }

        /* Heartfelt Ending */
        #final-msg {
            font-size: 16px;
            line-height: 1.6;
            color: var(--berry);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            width: 90%;
            animation: fadeIn 2s;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="game-container">
    <div id="scr-vibe" class="screen">
        <h2 style="font-family:'Silkscreen'; color:var(--hot-pink); margin-bottom:20px;">READY FOR YOUR GIFT?</h2>
        <button class="btn" onclick="initGame()">ENTER MULTIVERSE üçì</button>
        <p style="margin-top:15px; font-size:12px;">(Turns on music & vibe)</p>
    </div>

    <div id="scr-load" class="screen hidden">
        <div style="font-size:60px;">üçì</div>
        <div id="percent-text" style="font-family:'Silkscreen'; color:var(--hot-pink);">0%</div>
        <div id="load-bar-container"><div id="load-bar-fill"></div></div>
        <div id="trivia-box" style="font-size:12px; font-weight:bold; color:var(--berry);">Connecting to Lexi's heart...</div>
    </div>

    <div id="scr-gate" class="screen hidden">
        <h2 style="margin-bottom:40px;">DO YOU REALLY LOVE ME?</h2>
        <div style="position:relative; width:100%; height:300px;">
            <button class="btn" onclick="startQuiz()">YES, FOREVER!</button>
            <button id="no-run" class="btn" style="background:#555; box-shadow:0 6px 0 #333;">NO</button>
        </div>
    </div>

    <div id="scr-quiz" class="screen hidden">
        <p id="quiz-q" style="font-weight:bold; margin-bottom:20px;"></p>
        <div id="quiz-options" style="display:grid; gap:10px; width:100%;"></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="scr-final" class="screen hidden" style="background:var(--pink);">
        <div id="final-msg">
            <h1 style="font-family:'Silkscreen'; margin-bottom:15px;">MY LEXI üçì</h1>
            <p>Every mile between us is just a reminder of how much you're worth the wait. You didn't just play a game; you've been winning my heart every single day. No boss is tougher than distance, and no game is as sweet as you.</p>
            <p style="margin-top:15px; font-weight:bold;">I love you more than words can code.</p>
            <p style="margin-top:10px; font-family:'Silkscreen'; font-size:12px;">‚Äî CJ</p>
        </div>
        <button class="btn" style="margin-top:30px;" onclick="location.reload()">REPLAY ‚ù§Ô∏è</button>
    </div>
</div>

<audio id="bg-music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<script>
    let state = { qIdx: 0, loading: 0 };
    const music = document.getElementById('bg-music');

    function initGame() {
        showScreen('scr-load');
        music.play();
        loadLogic();
    }

    function loadLogic() {
        const trivia = ["Distance means nothing. ‚úàÔ∏è", "Lexi is the prettiest. ‚ú®", "CJ ‚ù§Ô∏è Lexi Forever.", "Loading braincell sync..."];
        const itv = setInterval(() => {
            state.loading++;
            document.getElementById('percent-text').innerText = state.loading + "%";
            document.getElementById('load-bar-fill').style.width = state.loading + "%";
            if(state.loading % 25 === 0) document.getElementById('trivia-box').innerText = trivia[state.loading/25-1];
            if(state.loading >= 100) { clearInterval(itv); showScreen('scr-gate'); initNoButton(); }
        }, 40);
    }

    function initNoButton() {
        const no = document.getElementById('no-run');
        const moveNo = () => {
            const x = Math.random() * 60 + 20;
            const y = Math.random() * 60 + 20;
            no.style.left = `${x}%`;
            no.style.top = `${y}%`;
        };
        no.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });
        no.addEventListener('mouseover', moveNo);
    }

    const questions = [
        {q: "Who is CJ's favorite person?", a: ["Lexi", "Lexi", "Lexi", "All of the above"]},
        {q: "Are we endgame?", a: ["Yes", "Definitely", "Absolutely", "üíç"]}
    ];

    function startQuiz() {
        showScreen('scr-quiz');
        renderQuiz();
    }

    function renderQuiz() {
        if(state.qIdx >= questions.length) return showScreen('scr-final');
        const q = questions[state.qIdx];
        document.getElementById('quiz-q').innerText = q.q;
        const opts = document.getElementById('quiz-options');
        opts.innerHTML = '';
        q.a.forEach(txt => {
            const b = document.createElement('button');
            b.className = 'btn';
            b.innerText = txt;
            b.onclick = () => { state.qIdx++; renderQuiz(); };
            opts.appendChild(b);
        });
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }
</script>
</body>
</html>
