<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Strawberry Multiverse üçì</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        :root {
            --pink: #ffb7c5;
            --hot-pink: #ff4d6d;
            --cream: #fff5f5;
            --green: #a7c957;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: var(--pink);
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #game-container {
            width: 375px; height: 667px; /* Mobile aspect ratio for Canva */
            background: var(--cream);
            border: 6px solid white;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* Minecraft Health Bar */
        #ui-layer {
            position: absolute; top: 10px; left: 10px; right: 10px;
            z-index: 100; display: none; justify-content: space-between;
            pointer-events: none;
        }
        .heart-bar { display: flex; gap: 2px; }
        .heart { color: var(--hot-pink); font-size: 12px; }

        /* General Screen Styles */
        .screen {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; padding: 20px; box-sizing: border-box;
        }
        .hidden { display: none !important; }

        h1 { font-size: 18px; color: var(--hot-pink); line-height: 1.5; }
        p { font-size: 10px; color: #555; }

        .btn {
            background: var(--hot-pink); color: white;
            border: none; padding: 15px; border-radius: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px; cursor: pointer; margin: 10px;
            box-shadow: 0 4px 0 #c9184a;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }

        #no-btn { position: absolute; }

        /* Level 2: Space Impact */
        #game-canvas { background: #000; width: 100%; height: 100%; display: none; }

        /* Final Screen */
        .polaroid {
            background: white; padding: 10px 10px 30px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: rotate(-2deg); margin-top: 20px;
        }
        .polaroid img { width: 200px; height: 200px; background: #eee; object-fit: cover; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="ui-layer">
        <div class="heart-bar" id="heart-bar"></div>
        <div id="lvl-display" style="font-size: 8px;">LVL: 1</div>
    </div>

    <div id="scr-intro" class="screen">
        <div style="font-size: 50px;">üçì</div>
        <h1>Strawberry Multiverse</h1>
        <p>A special 1-Month Adventure</p>
        <button class="btn" onclick="goToStep(1)">START ADVENTURE</button>
    </div>

    <div id="scr-love1" class="screen hidden">
        <h1>Do you love me?</h1>
        <button class="btn" onclick="goToStep(2)">YES</button>
        <button class="btn" onclick="goToStep(2)">YES</button>
    </div>

    <div id="scr-love2" class="screen hidden">
        <h1>Do you REALLY love me?</h1>
        <button class="btn" onclick="nextLevel()">YES</button>
        <button class="btn" id="no-btn" onmouseover="dodge()">NO</button>
    </div>

    <div id="scr-quiz" class="screen hidden">
        <h1 id="q-num">Q1</h1>
        <p id="q-text">Loading...</p>
        <div id="quiz-options"></div>
    </div>

    <canvas id="mainCanvas"></canvas>

    <div id="scr-final" class="screen hidden">
        <h1>Happy 1st Month!</h1>
        <div class="polaroid">
            <img src="https://via.placeholder.com/200" id="us-photo">
            <p style="color:black">Me & You üçì</p>
        </div>
        <p>Until next month:</p>
        <div id="timer" style="font-size: 12px; color: var(--hot-pink);">00:00:00</div>
    </div>
</div>

<script>
    const state = {
        step: 0,
        level: 0,
        hearts: 10,
        quizIndex: 0
    };

    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 375;
    canvas.height = 667;

    // --- NAVIGATION ---
    function goToStep(s) {
        document.querySelectorAll('.screen').forEach(scr => scr.classList.add('hidden'));
        if(s === 1) document.getElementById('scr-love1').classList.remove('hidden');
        if(s === 2) document.getElementById('scr-love2').classList.remove('hidden');
    }

    function dodge() {
        const btn = document.getElementById('no-btn');
        btn.style.top = Math.random() * 80 + '%';
        btn.style.left = Math.random() * 80 + '%';
    }

    function updateHearts() {
        const bar = document.getElementById('heart-bar');
        bar.innerHTML = 'üçì'.repeat(state.hearts);
    }

    function nextLevel() {
        state.level++;
        document.querySelectorAll('.screen').forEach(scr => scr.classList.add('hidden'));
        document.getElementById('ui-layer').style.display = 'flex';
        document.getElementById('lvl-display').innerText = "LVL: " + state.level;
        updateHearts();

        if(state.level === 1) startQuiz();
        if(state.level === 2) startSpaceImpact();
        if(state.level >= 10) showFinal();
    }

    // --- LEVEL 1: QUIZ ---
    const quizData = [
        { q: "Who yaps more on the phone?", a: ["Me", "You"] },
        { q: "Who fell first?", a: ["Me", "You"] },
        { q: "First date idea?", a: ["Picnic", "Arcade"] },
        { q: "Who is the 'softest'?", a: ["Me", "You"] },
        { q: "Favorite thing about us?", a: ["Vibe", "Everything"] },
        { q: "Who gives more princess treatment?", a: ["Me", "You"] },
        { q: "Morning or Night person?", a: ["Sun", "Moon"] },
        { q: "Coffee or Tea dates?", a: ["Coffee", "Tea"] },
        { q: "Who is more clingy?", a: ["Me", "You"] },
        { q: "Ready for Level 2?", a: ["YES", "YES!"] }
    ];

    function startQuiz() {
        document.getElementById('scr-quiz').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const data = quizData[state.quizIndex];
        document.getElementById('q-num').innerText = "Q" + (state.quizIndex + 1);
        document.getElementById('q-text').innerText = data.q;
        const options = document.getElementById('quiz-options');
        options.innerHTML = '';
        data.a.forEach(choice => {
            const b = document.createElement('button');
            b.className = 'btn';
            b.innerText = choice;
            b.onclick = () => {
                state.quizIndex++;
                if(state.quizIndex < quizData.length) showQuestion();
                else nextLevel();
            };
            options.appendChild(b);
        });
    }

    // --- LEVEL 2: SPACE IMPACT ---
    function startSpaceImpact() {
        canvas.style.display = 'block';
        let shipY = 300;
        let enemies = [];
        let frames = 0;

        function loop() {
            if(state.level !== 2) return;
            ctx.fillStyle = '#fff5f5';
            ctx.fillRect(0,0, canvas.width, canvas.height);
            
            // Draw Ship (Strawberry)
            ctx.font = "30px Arial";
            ctx.fillText("üçì", 50, shipY);

            // Spawn Clock/Flag enemies
            if(frames % 60 === 0) {
                enemies.push({ x: 400, y: Math.random() * 600, t: Math.random() > 0.5 ? "‚è∞" : "üö©" });
            }

            enemies.forEach((en, i) => {
                en.x -= 3;
                ctx.fillText(en.t, en.x, en.y);
                // Collision
                if(en.x < 80 && en.x > 30 && Math.abs(en.y - shipY) < 30) {
                    state.hearts--;
                    updateHearts();
                    enemies.splice(i, 1);
                }
            });

            frames++;
            if(frames > 500) { canvas.style.display='none'; nextLevel(); return; }
            requestAnimationFrame(loop);
        }

        window.onmousemove = (e) => { shipY = e.clientY - 100; };
        loop();
    }

    // --- FINAL SCREEN ---
    function showFinal() {
        document.getElementById('scr-final').classList.remove('hidden');
        // Countdown to next month
        const nextMonth = new Date();
        nextMonth.setMonth(nextMonth.getMonth() + 1);
        setInterval(() => {
            const now = new Date();
            const diff = nextMonth - now;
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            document.getElementById('timer').innerText = `${h}h ${m}m ${s}s`;
        }, 1000);
    }
</script>
</body>
</html>
