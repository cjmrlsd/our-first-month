Do not touch anything on the code exept Stage 5 The leap obby

follow the following code bellow on how this code obby game works but make sure to use the theme and emogi from the original previous code <!DOCTYPE html>
<html>
<head>
    <title>2D Leap Obby</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; color: white; font-family: sans-serif; }
        canvas { display: block; background: #87CEEB; margin: 20px auto; border: 4px solid #333; }
        .ui { text-align: center; }
    </style>
</head>
<body>
    <div class="ui">
        <h1>Simple 2D Obby</h1>
        <p>Use <b>Arrow Keys</b> or <b>WASD</b> to move and jump!</p>
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 800;
        canvas.height = 400;

        // Game Constants
        const gravity = 0.8;
        const friction = 0.8;

        // Player Object
        const player = {
            x: 50,
            y: 300,
            width: 30,
            height: 30,
            speed: 5,
            velX: 0,
            velY: 0,
            jumping: false,
            color: "#ff4444"
        };

        // Platforms (The "Obby" layout)
        const platforms = [
            { x: 0, y: 380, width: 200, height: 20 },   // Starting ground
            { x: 250, y: 300, width: 100, height: 20 }, // First jump
            { x: 450, y: 220, width: 100, height: 20 }, // Second jump
            { x: 650, y: 150, width: 120, height: 20 }, // Final platform
            { x: 720, y: 110, width: 30, height: 40, goal: true } // The Goal
        ];

        const keys = {};

        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function update() {
            // Horizontal Movement
            if (keys['ArrowRight'] || keys['KeyD']) {
                if (player.velX < player.speed) player.velX++;
            }
            if (keys['ArrowLeft'] || keys['KeyA']) {
                if (player.velX > -player.speed) player.velX--;
            }

            // Jump Logic
            if ((keys['ArrowUp'] || keys['KeyW'] || keys['Space']) && !player.jumping) {
                player.jumping = true;
                player.velY = -player.speed * 3;
            }

            // Apply Physics
            player.velX *= friction;
            player.velY += gravity;

            player.x += player.velX;
            player.y += player.velY;

            // Platform Collision
            let onGround = false;
            for (let plat of platforms) {
                if (player.x < plat.x + plat.width &&
                    player.x + player.width > plat.x &&
                    player.y < plat.y + plat.height &&
                    player.y + player.height > plat.y) {
                    
                    // Basic "Top Collision" check
                    if (player.velY > 0) {
                        player.jumping = false;
                        player.y = plat.y - player.height;
                        player.velY = 0;
                        onGround = true;

                        if (plat.goal) {
                            alert("You reached the end!");
                            resetGame();
                        }
                    }
                }
            }

            // Fall off screen (Death)
            if (player.y > canvas.height) {
                resetGame();
            }
        }

        function resetGame() {
            player.x = 50;
            player.y = 300;
            player.velX = 0;
            player.velY = 0;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Platforms
            platforms.forEach(plat => {
                ctx.fillStyle = plat.goal ? "#FFD700" : "#44aa44";
                ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
            });

            // Draw Player
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);

            requestAnimationFrame(() => {
                update();
                draw();
            });
        }

        draw();
    </script>
</body>
</html>
